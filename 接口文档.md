# 1. 全栈在线电影开发 API 接口文档

## 1.1. API V1 接口说明

- 接口基准地址：`http://localhost:8088/`
- 服务端已开启 CORS 跨域支持
- 使用 HTTP Status Code 标识状态
- 数据返回格式统一使用 JSON

### 1.1.1. 支持的请求方法

- GET（SELECT）：从服务器取出资源（一项或多项）。
- POST（CREATE）：在服务器新建一个资源。
- PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
- DELETE（DELETE）：从服务器删除资源。

### 1.1.2. 通用返回状态说明

| *状态码* | *含义*                | *说明*   |
| -------- | --------------------- | -------- |
| 200      | OK                    | 请求成功 |
| 201      | CREATED               | 创建成功 |
| 204      | DELETED               | 删除成功 |
| 404      | NOT FOUND             | 访问失败 |
| 500      | INTERNAL SERVER ERROR | 内部错误 |

------

## 1.2. 登录

### 1.2.1. 管理员登录验证接口

- 请求路径：admin
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| username | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

- 响应参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| id       | 用户 ID  | 不能为空 |
| username | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |
| phone    | 手机号   | 不能为空 |
| email    | 邮箱     | 不能为空 |

- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "username": "admin",
            "password": "123456",
            "email": "123456@qq.com",
            "phone": "15056251592"
        }
    ],
    "meta": {
        "status": 200,
        "msg": "登录成功"
    }
}
```

### 1.2.1. 移动端登录验证接口

- 请求路径：user

- 请求方法：post

- 请求参数

  | 参数名   | 参数说明 | 备注     |
  | -------- | -------- | -------- |
  | username | 用户名   | 不能为空 |
  | password | 密码     | 不能为空 |

- 响应参数

| 参数名   | 参数说明       | 备注     |
| -------- | -------------- | :------- |
| id       | 用户 ID        | 不能为空 |
| username | 用户名         | 不能为空 |
| password | 密码           | 不能为空 |
| sex      | 性别           | 不能为空 |
| phone    | 手机号         | 不能为空 |
| birth    | 生日           | 不能为空 |
| reg      | 注册日期       | 不能为空 |
| follow   | 是否关注公众号 | 不能为空 |
| favorite | 收藏夹         |          |
| record   | 观影历史       |          |

- 响应数据

  ```json
  {
      "data": [
          {
              "id": 11,
              "username": "admin",
              "password": "123456",
              "sex": "男",
              "phone": "3453453543",
              "birth": "2020-06-01T16:00:00.000Z",
              "reg": "2020-06-20T16:00:00.000Z",
              "follow": 0,
              "favorite": null,
              "record": null
          }
      ],
      "meta": {
          "status": 200,
          "msg": "登录成功"
      }
  }
  ```

## 1.3. 用户管理

### 1.3.1. 查看用户数据列表

- 请求路径：admin/role_users
- 请求方法：post
- 请求参数

- 响应参数

  | 参数名   | 参数说明     | 备注     |
  | -------- | ------------ | -------- |
  | pagenum  | 当前页码     | 不能为空 |
  | pagesize | 每页显示条数 | 不能为空 |
  
- 响应数据

```json
{
    "data": [
        {
            "id": 2,
            "username": "fau56-6",
            "password": "123456325",
            "sex": "女",
            "phone": "1234567",
            "birth": "2020-06-19T16:00:00.000Z",
            "reg": "2020-06-20T16:00:00.000Z",
            "follow": 0,
            "favorite": null,
            "record": null
        },
        {
            "id": 3,
            "username": "fau56-6783",
            "password": "12345632553",
            "sex": "女",
            "phone": "1234567534",
            "birth": "2020-06-19T16:00:00.000Z",
            "reg": "2020-06-20T16:00:00.000Z",
            "follow": 0,
            "favorite": null,
            "record": null
        }
    ],
    "meta": {
        "status": 200,
        "msg": "数据查询成功"
    }
}
```

### 1.3.2. 管理员添加用户

- 请求路径：admin/add_user

- 请求方法：post

- 请求参数

  | 参数名   | 参数说明       | 备注     |
  | -------- | -------------- | -------- |
  | id       | 用户 ID        |          |
  | username | 用户名         | 不能为空 |
  | password | 密码           | 不能为空 |
  | sex      | 性别           | 不能为空 |
  | phone    | 手机号         | 不能为空 |
  | birth    | 生日           | 不能为空 |
  | reg      | 注册日期       | 不能为空 |
  | follow   | 是否关注公众号 | 不能为空 |
  | favorite | 收藏夹         |          |
  | record   | 观影历史       |          |

- 响应参数

  | 参数名 | 参数说明 | 备注 |
  | ------ | -------- | ---- |
  | status | 状态码   |      |
  | msg    | 相应状态 |      |

- 响应数据

```json
{
    "meta": {
        "status": 201,
        "msg": "添加成功"
    }
}
```

### 1.3.3. 移动端注册用户

- 请求路径：users

- 请求方法：post

- 请求参数

  | 参数名   | 参数说明       | 备注     |
  | -------- | -------------- | -------- |
  | id       | 用户 ID        | 可选     |
  | username | 用户名         | 不能为空 |
  | password | 密码           | 不能为空 |
  | sex      | 性别           | 不能为空 |
  | phone    | 手机号         | 不能为空 |
  | birth    | 生日           | 不能为空 |
  | reg      | 注册日期       | 不能为空 |
  | follow   | 是否关注公众号 | 不能为空 |
  | favorite | 收藏夹         |          |
  | record   | 观影历史       |          |

- 响应参数

  | 参数名 | 参数说明 | 备注 |
  | ------ | -------- | ---- |
  | status | 状态码   |      |
  | msg    | 相应状态 |      |

- 响应数据

  ```json
  {
      "meta": {
          "status": 201,
          "msg": "添加成功"
      }
  }
  ```

## 1.4. 电影库管理

### 1.4.1. 查看电影库轮播图列表

- 请求路径：/swiper

- 请求方法：get

- 请求参数

- 响应数据

  ```json
  {
      "data": [
          {
              "id": 1,
              "name": "春潮",
              "summary": "报社记者郭建波、母亲纪明岚与女儿郭婉婷同住在一个屋檐下，祖孙三代因亲情关系捆绑在一起的生活，看似平静实则暗潮涌动。记者郭建波在报导社会负面事件的同时，也在揭开自己身上的伤疤；母亲纪明岚在外为人热情，受人爱戴，但是回到家却判若两人；女儿郭婉婷小小年纪就学会了成人世界里的种种生存法则。一次次的叛逆与反抗都在隐忍中归于平静，一场悄无声息的战争在三代人之间暗自滋生，终将爆发",
              "img": "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2604517782.webp",
              "link": "https://www.iqiyi.com/v_19rrcuwotc.html"
          }
      ],
      "meta": {
          "status": 200,
          "msg": "获取数据成功"
      }
  }
  ```

### 1.4.2. 查看电影库数据

- 请求路径：/good

- 请求方法：get

- 请求参数

  | 参数名   | 参数说明     | 备注     |
  | -------- | ------------ | -------- |
  | pagenum  | 当前页码     | 不能为空 |
  | pagesize | 每页显示条数 | 不能为空 |

- 响应数据

  ```json
  {
      "data": [
          {
              "id": 9,
              "name": "阳光普照",
              "language": "汉语",
              "direct": "钟孟宏",
              "type": "剧情 / 犯罪",
              "score": "8.4",
              "summary": "平凡的一家人阿文（陈以文 饰）和琴姐（柯淑勤 饰）育有两个儿子，叛逆的小儿子阿和（巫建和 饰）与好友菜头（刘冠廷 饰）砍伤人进了少年辅育院，但阿和的女友小玉（吴岱凌 饰）却带着身孕来家里…琴姐不顾阿文反对，将小玉留下来照顾。此时，被砍伤者家属也来找阿文求取巨额赔偿，阿文受不了总是带来麻烦的小儿子，将所有希望都寄托在资优生大儿子阿豪（许光汉 饰）身上，却不知道温暖善良的阿豪心中也藏着不为人知的秘密…",
              "img": "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2570235120.webp",
              "link": "https://www.iqiyi.com/v_19ryb0icl8.html",
              "date": "2019-10-31T16:00:00.000Z"
          },
          {
              "id": 10,
              "name": "我和我的祖国 ",
              "language": "汉语",
              "direct": " 陈凯歌 / 张一白",
              "type": "剧情",
              "score": "7.1",
              "summary": "七位导演分别取材新中国成立70周年以来，祖国经历的无数个历史性经典瞬间。讲述普通人与国家之间息息相关密不可分的动人故事。聚焦大时代大事件下，小人物和国家之间，看似遥远实则密切的关联，唤醒全球华人共同回忆。",
              "img": "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2567998580.webp",
              "link": "https://www.iqiyi.com/v_19rsho8w7c.html",
              "date": "2019-09-29T16:00:00.000Z"
          }
      ],
      "meta": {
          "status": 200,
          "msg": "数据查询成功"
      }
  }
  ```

### 1.4.3. 查看电影排行榜数据

- 请求路径：/good/top

- 请求方法：get

- 请求参数

  | 参数名   | 参数说明     | 备注     |
  | -------- | ------------ | -------- |
  | pagenum  | 当前页码     | 不能为空 |
  | pagesize | 每页显示条数 | 不能为空 |

- 响应数据

